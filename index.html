<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Audiobox-jlib by icoretech</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Audiobox-jlib</h1>
        <p>Next generation Java library for AudioBox API</p>

        <p class="view"><a href="https://github.com/icoretech/audiobox-jlib">View the Project on GitHub <small>icoretech/audiobox-jlib</small></a></p>


        <ul>
          <li><a href="https://github.com/icoretech/audiobox-jlib/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/icoretech/audiobox-jlib/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/icoretech/audiobox-jlib">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="please-note" class="anchor" href="#please-note"><span class="octicon octicon-link"></span></a>PLEASE NOTE</h1>

<p>This library is not yet ready for production. It is actually under heavy development and still requires some refactor.
It does not work on the actual API specifications, if you need a java library that works with the actual API please use
the old <a href="https://github.com/icoretech/AudioBox.fm-JavaLib">AudioBox.fm-JavaLib</a>.</p>

<h2>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p><code>audiobox-jlib</code> is a simple library to control <a href="https://audiobox.fm">AudioBox</a> account through its powerful API.</p>

<p><a href="https://travis-ci.org/icoretech/audiobox-jlib"><img src="https://travis-ci.org/icoretech/audiobox-jlib.svg?branch=master" alt="Build Status"></a></p>

<h2>
<a name="minimum-requirements" class="anchor" href="#minimum-requirements"><span class="octicon octicon-link"></span></a>Minimum requirements</h2>

<ul>
<li>Java 1.7</li>
<li>Android Build Tools 19+ (for android projects)</li>
</ul><h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>You can choose amongst 3 HTTP Transport out of the box and if you are not happy you can implement your own.</li>
<li>You can choose amongst 3 JSON parser (Jackson, Guava, AndroidJsonFactory)</li>
<li>Transparent OAuth2 authorization flow</li>
<li>Easy to use</li>
</ul><h2>
<a name="dependencies" class="anchor" href="#dependencies"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<ul>
<li>
<a href="http://www.slf4j.org/">SLF4J</a> 1.7 (logging)</li>
<li>
<a href="https://github.com/typesafehub/config">Typesafe Config</a> 1.2.0 (configuration)</li>
<li>
<a href="https://code.google.com/p/google-http-java-client/">Google HTTP Java Client</a> 1.18 (HTTP layer)</li>
<li>
<a href="https://code.google.com/p/google-oauth-java-client/">Google OAuth Java Client</a> 1.18 (OAuth2 layer)</li>
<li>
<a href="http://commons.apache.org/proper/commons-validator/">Apache Common Validator</a> 1.4 (Utils)</li>
<li>
<a href="http://commons.apache.org/proper/commons-lang/">Apache Commons Lang</a> 3.3.2 (Utils)</li>
<li>
<a href="https://github.com/SQiShER/java-object-diff">Java Object Diff</a> 0.13.1 (Utils)</li>
</ul><h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting started</h2>

<h3>
<a name="1-add-the-dependency" class="anchor" href="#1-add-the-dependency"><span class="octicon octicon-link"></span></a>1. Add the dependency</h3>

<p>If your project is under maven add this under the dependency management section:</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;fm.audiobox&lt;/groupId&gt;
  &lt;artifactId&gt;audiobox-jlib&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<h3>
<a name="2-register-your-application" class="anchor" href="#2-register-your-application"><span class="octicon octicon-link"></span></a>2. Register your application</h3>

<ol>
<li>Subscribe an AudioBox account <a href="https://audiobox.fm/account/sign_up">here</a>.</li>
<li>Register your application <a href="https://audiobox.fm/oauth2/applications">here</a>.</li>
<li>Take note of the API Consumer Key and Consumer Secret.</li>
</ol><h3>
<a name="3-configure-the-client" class="anchor" href="#3-configure-the-client"><span class="octicon octicon-link"></span></a>3. Configure the client</h3>

<p>Now that you have all needed pieces you have to configure your client before making any operation:</p>

<div class="highlight highlight-java"><pre><span class="n">Configuration</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">()</span>
  <span class="o">.</span><span class="na">setApiKey</span><span class="o">(</span> <span class="s">"[Your Consumer Key]"</span> <span class="o">)</span>
  <span class="o">.</span><span class="na">setApiSecret</span><span class="o">(</span> <span class="s">"[Your Consumer Secret]"</span> <span class="o">);</span>
</pre></div>

<p>Through the <a href="http://ci.icorete.ch/job/AudioBox-Jlib/javadoc/reference/fm/audiobox/core/config/Configuration.html">Configuration</a>
object you can configure many aspects of the library behaviors; some are trivial such as application name, version, etc.
and other are more complex such as HttpTransport or JSON parser.</p>

<p>This library does not offer a data store for credentials storage out of the box. You should provide
one like FileDataStoreFactory, MemoryDataStoreFactory or implementing one
by extending the <a href="https://code.google.com/p/google-http-java-client/source/browse/google-http-client/src/main/java/com/google/api/client/util/store/AbstractDataStoreFactory.java">AbstractDataStoreFactory</a>.
This data store is used to store credentials so you should be really carefully with it.</p>

<p>To set it use the configuration:</p>

<div class="highlight highlight-java"><pre><span class="n">config</span><span class="o">.</span><span class="na">setDataStoreFactory</span><span class="o">(</span> <span class="k">new</span> <span class="n">MyDataStoreFactory</span><span class="o">()</span> <span class="o">);</span>
</pre></div>

<p>Since this library wants to be as much agnostic as possible regarding the HTTP client and
the JSON parser libraries you should set them at this moment by choosing amongst:</p>

<ul>
<li>
<strong>NetHttpTransport:</strong> based on HttpURLConnection that is found in all Java SDKs, and thus usually the simplest choice.</li>
<li>
<strong>ApacheHttpTransport:</strong> based on the popular Apache HttpClient that allows for more customization.</li>
<li>
<strong>UrlFetchTransport:</strong> based on URL Fetch Java API in the Google App Engine SDK</li>
</ul><p>as HTTP transport, and:</p>

<ul>
<li>
<strong>JacksonFactory:</strong> based on the popular Jackson library which is considered the fastest in terms of parsing/serialization speed</li>
<li>
<strong>GsonFactory:</strong> based on the Google GSON library which is a lighter-weight option (small size) that is pretty fast also (though not quite as fast as Jackson)</li>
<li>
<strong>AndroidJsonFactory:</strong> based on the JSON library built-in to Android Honeycomb (SDK 3.0) or higher that is identical to the Google GSON library</li>
</ul><p>as JSON parser library.</p>

<p>There are no defaults that's why you must provide them through the configuration:</p>

<div class="highlight highlight-java"><pre><span class="n">config</span>
 <span class="o">.</span><span class="na">setHttpTransport</span><span class="o">(</span> <span class="k">new</span> <span class="n">NetHttpTransport</span><span class="o">()</span> <span class="o">)</span>
 <span class="o">.</span><span class="na">setJsonFactory</span><span class="o">(</span> <span class="k">new</span> <span class="n">JacksonFactory</span><span class="o">()</span> <span class="o">);</span>
</pre></div>

<h3>
<a name="4-authorize-the-user-account" class="anchor" href="#4-authorize-the-user-account"><span class="octicon octicon-link"></span></a>4. Authorize the user account</h3>

<p>We just gone through the basic configuration and once the setup is completed you can create your Client,
but we still need to authorize the application to start performing any kind of operation supported by AudioBox API:</p>

<div class="highlight highlight-java"><pre><span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Client</span><span class="o">(</span> <span class="n">config</span> <span class="o">);</span>
<span class="n">client</span><span class="o">.</span><span class="na">authorize</span><span class="o">(</span> <span class="s">"username"</span><span class="o">,</span> <span class="s">"password"</span> <span class="o">);</span>
<span class="o">...</span>
</pre></div>

<p>When the application is successfully authorized a grant token is stored in the configured data store.
Keep in mind that grant tokens may expires at any time. A request against AudioBox with an expired token will result in
an AuthorizationException. Your application should be ready to trap it in order to present a new login form.</p>

<h3>
<a name="5-browse-the-collection" class="anchor" href="#5-browse-the-collection"><span class="octicon octicon-link"></span></a>5. Browse the collection</h3>

<p>Now that the client is configured and authorized we can browse and perform any API-supported operation on AudioBox:</p>

<p>Get user information:</p>

<div class="highlight highlight-java"><pre><span class="n">client</span><span class="o">.</span><span class="na">getUser</span><span class="o">();</span>
</pre></div>

<p>Get user's playlists:</p>

<div class="highlight highlight-java"><pre><span class="n">client</span><span class="o">.</span><span class="na">getPlaylists</span><span class="o">();</span>
</pre></div>

<p>Or some other MediaFile operation:</p>

<div class="highlight highlight-java"><pre><span class="c1">// Load playlists</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Playlist</span><span class="o">&gt;</span> <span class="n">playlists</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getPlaylists</span><span class="o">();</span>
<span class="n">Playlist</span> <span class="n">p</span> <span class="o">=</span> <span class="n">playlists</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

<span class="c1">// Load media files</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">MediaFile</span><span class="o">&gt;</span> <span class="n">mfs</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">getMediaFiles</span><span class="o">(</span><span class="n">client</span><span class="o">);</span>
<span class="n">MediaFile</span> <span class="n">m</span> <span class="o">=</span> <span class="n">mfs</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

<span class="c1">// Edit some label</span>
<span class="n">m</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">"foo"</span><span class="o">);</span>
<span class="n">m</span><span class="o">.</span><span class="na">setArtist</span><span class="o">(</span><span class="s">"bar"</span><span class="o">);</span>

<span class="c1">// Save modifications</span>
<span class="n">m</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">client</span><span class="o">);</span>
</pre></div>

<p>To know more about this library checkout the <a href="http://icoretech.github.io/audiobox-jlib/apidocs/reference/fm/audiobox/core/Client.html">JavaDoc</a>.</p>

<h2>
<a name="use-cases" class="anchor" href="#use-cases"><span class="octicon octicon-link"></span></a>Use cases</h2>

<ul>
<li><a href="https://play.google.com/store/apps/details?id=fm.audiobox">AudioBox for Android</a></li>
</ul><h2>
<a name="contribute" class="anchor" href="#contribute"><span class="octicon octicon-link"></span></a>Contribute</h2>

<ul>
<li>Get familiar with the philosophy of the library design.</li>
<li>
<a href="https://bitbucket.org/keytwo/audiobox-jlib/issues?status=new&amp;status=open">Check for open issues</a> or open a new issue to fill a bug or a feature request.</li>
<li>Fork the audiobox-jlib on Github and make your changes.</li>
<li>Write some tests which show that the bug was fixed or that the feature works as expected.</li>
<li>Send a pull request to get changes merged and published.</li>
</ul><h2>
<a name="gradle-tasks-for-library-developers" class="anchor" href="#gradle-tasks-for-library-developers"><span class="octicon octicon-link"></span></a>Gradle Tasks for library developers</h2>

<p>To generate test coverage report run</p>

<pre><code>gradle test jacocoTestReport
</code></pre>

<p>To generate JDoc run</p>

<pre><code>gradle generateDoclava
</code></pre>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/icoretech">icoretech</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
